{"version":3,"file":"set.js","sources":["../../../src/-private/new/set.ts"],"sourcesContent":["import { trackedSet, trackedWeakSet } from '@ember/reactive/collections';\n\nconst setConfig = {\n  equals: () => false,\n  description: 'TrackedSet from tracked-built-ins',\n};\nconst weakSetConfig = {\n  equals: () => false,\n  description: 'TrackedWeakSet from tracked-built-ins',\n};\n\nexport class TrackedSet {\n  constructor(existing: any) {\n    const reactive = trackedSet(existing, setConfig);\n\n    return new Proxy(reactive, {\n      get(target, prop) {\n        const value = Reflect.get(target, prop, target);\n\n        if (typeof value === 'function') {\n          return value.bind(target);\n        }\n        return value;\n      },\n      getPrototypeOf() {\n        return TrackedSet.prototype;\n      },\n    });\n  }\n}\n\nexport class TrackedWeakSet {\n  constructor(values: any) {\n    const reactive = trackedWeakSet(values, weakSetConfig);\n\n    return new Proxy(reactive, {\n      get(target, prop) {\n        const value = Reflect.get(target, prop, target);\n\n        if (typeof value === 'function') {\n          return value.bind(target);\n        }\n        return value;\n      },\n      getPrototypeOf() {\n        return TrackedWeakSet.prototype;\n      },\n    });\n  }\n}\n\n// Ensure instanceof works correctly\nObject.setPrototypeOf(TrackedSet.prototype, Set.prototype);\nObject.setPrototypeOf(TrackedWeakSet.prototype, WeakSet.prototype);\n"],"names":["setConfig","equals","description","weakSetConfig","TrackedSet","constructor","existing","reactive","trackedSet","Proxy","get","target","prop","value","Reflect","bind","getPrototypeOf","prototype","TrackedWeakSet","values","trackedWeakSet","Object","setPrototypeOf","Set","WeakSet"],"mappings":";;AAEA,MAAMA,SAAS,GAAG;EAChBC,MAAM,EAAEA,MAAM,KAAK;AACnBC,EAAAA,WAAW,EAAE;AACf,CAAC;AACD,MAAMC,aAAa,GAAG;EACpBF,MAAM,EAAEA,MAAM,KAAK;AACnBC,EAAAA,WAAW,EAAE;AACf,CAAC;AAEM,MAAME,UAAU,CAAC;EACtBC,WAAWA,CAACC,QAAa,EAAE;AACzB,IAAA,MAAMC,QAAQ,GAAGC,UAAU,CAACF,QAAQ,EAAEN,SAAS,CAAC;AAEhD,IAAA,OAAO,IAAIS,KAAK,CAACF,QAAQ,EAAE;AACzBG,MAAAA,GAAGA,CAACC,MAAM,EAAEC,IAAI,EAAE;QAChB,MAAMC,KAAK,GAAGC,OAAO,CAACJ,GAAG,CAACC,MAAM,EAAEC,IAAI,EAAED,MAAM,CAAC;AAE/C,QAAA,IAAI,OAAOE,KAAK,KAAK,UAAU,EAAE;AAC/B,UAAA,OAAOA,KAAK,CAACE,IAAI,CAACJ,MAAM,CAAC;AAC3B,QAAA;AACA,QAAA,OAAOE,KAAK;MACd,CAAC;AACDG,MAAAA,cAAcA,GAAG;QACf,OAAOZ,UAAU,CAACa,SAAS;AAC7B,MAAA;AACF,KAAC,CAAC;AACJ,EAAA;AACF;AAEO,MAAMC,cAAc,CAAC;EAC1Bb,WAAWA,CAACc,MAAW,EAAE;AACvB,IAAA,MAAMZ,QAAQ,GAAGa,cAAc,CAACD,MAAM,EAAEhB,aAAa,CAAC;AAEtD,IAAA,OAAO,IAAIM,KAAK,CAACF,QAAQ,EAAE;AACzBG,MAAAA,GAAGA,CAACC,MAAM,EAAEC,IAAI,EAAE;QAChB,MAAMC,KAAK,GAAGC,OAAO,CAACJ,GAAG,CAACC,MAAM,EAAEC,IAAI,EAAED,MAAM,CAAC;AAE/C,QAAA,IAAI,OAAOE,KAAK,KAAK,UAAU,EAAE;AAC/B,UAAA,OAAOA,KAAK,CAACE,IAAI,CAACJ,MAAM,CAAC;AAC3B,QAAA;AACA,QAAA,OAAOE,KAAK;MACd,CAAC;AACDG,MAAAA,cAAcA,GAAG;QACf,OAAOE,cAAc,CAACD,SAAS;AACjC,MAAA;AACF,KAAC,CAAC;AACJ,EAAA;AACF;;AAEA;AACAI,MAAM,CAACC,cAAc,CAAClB,UAAU,CAACa,SAAS,EAAEM,GAAG,CAACN,SAAS,CAAC;AAC1DI,MAAM,CAACC,cAAc,CAACJ,cAAc,CAACD,SAAS,EAAEO,OAAO,CAACP,SAAS,CAAC;;;;"}